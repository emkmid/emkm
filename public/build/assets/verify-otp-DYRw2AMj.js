import{r as d,u as b,j as e,H as D,a as N}from"./app-BtQOPadY.js";import{A as S}from"./app-logo-Bbq_lEUK.js";import{B as M}from"./button-kG5wWM0Y.js";import{C as T,a as R,b as O,c as A,d as F}from"./card-VW3GaBeo.js";import{S as L}from"./shield-DNbGMIua.js";import{M as V}from"./mail-wOc_yxyX.js";import{R as B}from"./refresh-cw-DsWhotZh.js";import"./createLucideIcon-CsV2O2Jo.js";function Y({email:k,name:H,status:p}){const[m,l]=d.useState(["","","","","",""]),[o,h]=d.useState(300),r=d.useRef([]),{data:I,setData:$,post:z,processing:y,errors:j,reset:J}=b({code:""}),x=b({});d.useEffect(()=>{if(o<=0)return;const s=setInterval(()=>{h(t=>t-1)},1e3);return()=>clearInterval(s)},[o]),d.useEffect(()=>{var s;(s=r.current[0])==null||s.focus()},[]);const v=(s,t)=>{var u;if(t&&!/^\d$/.test(t))return;const a=[...m];if(a[s]=t,l(a),t&&s<5&&((u=r.current[s+1])==null||u.focus()),a.every(n=>n!=="")&&s===5){const n=a.join("");setTimeout(()=>{N.post(route("otp.verify"),{code:n},{onError:()=>{var i;l(["","","","","",""]),(i=r.current[0])==null||i.focus()}})},100)}},C=(s,t)=>{var a;t.key==="Backspace"&&!m[s]&&s>0&&((a=r.current[s-1])==null||a.focus()),t.key==="v"&&(t.ctrlKey||t.metaKey)&&(t.preventDefault(),navigator.clipboard.readText().then(u=>{var g;const n=u.replace(/\D/g,"").slice(0,6).split(""),i=[...m];n.forEach((f,c)=>{c<6&&(i[c]=f)}),l(i);const K=Math.min(n.length,5);if((g=r.current[K])==null||g.focus(),n.length===6){const f=i.join("");setTimeout(()=>{N.post(route("otp.verify"),{code:f},{onError:()=>{var c;l(["","","","","",""]),(c=r.current[0])==null||c.focus()}})},100)}}))},w=()=>{x.post(route("otp.resend"),{onSuccess:()=>{var s;h(300),l(["","","","","",""]),(s=r.current[0])==null||s.focus()}})},E=s=>{const t=Math.floor(s/60),a=s%60;return`${t}:${a.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"grid min-h-screen w-full lg:grid-cols-2",children:[e.jsx(D,{title:"Verifikasi Email"}),e.jsxs("div",{className:"relative hidden flex-col items-center justify-center p-10 text-white lg:flex",style:{backgroundColor:"#23627C"},children:[e.jsx("div",{className:"absolute inset-0 bg-black/40"}),e.jsxs("div",{className:"z-10 text-center",children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx(S,{})}),e.jsx(L,{className:"mx-auto mb-4 h-20 w-20"}),e.jsx("h1",{className:"text-4xl font-bold",children:"Verifikasi Email Anda"}),e.jsx("p",{className:"mt-4 max-w-md text-lg text-white/80",children:"Kami telah mengirim kode verifikasi 6 digit ke email Anda untuk memastikan keamanan akun."})]})]}),e.jsx("div",{className:"flex items-center justify-center p-6",style:{backgroundColor:"#D3EDFF"},children:e.jsxs(T,{className:"w-full max-w-md duration-700 animate-in fade-in-50 slide-in-from-bottom-8",children:[e.jsxs(R,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-blue-100",children:e.jsx(V,{className:"h-6 w-6 text-[#23627C]"})}),e.jsx(O,{className:"text-2xl font-bold tracking-tight text-[#23627C]",children:"Verifikasi Email"}),e.jsxs(A,{children:["Kami telah mengirim kode 6 digit ke ",e.jsx("br",{}),e.jsx("span",{className:"font-semibold text-[#23627C]",children:k})]})]}),e.jsxs(F,{className:"space-y-6",children:[p&&e.jsx("div",{className:"rounded-md bg-green-50 p-3 text-center text-sm text-green-800",children:p}),j.code&&e.jsx("div",{className:"rounded-md bg-red-50 p-3 text-center text-sm text-red-800",children:j.code}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center gap-2",children:m.map((s,t)=>e.jsx("input",{ref:a=>{r.current[t]=a},type:"text",inputMode:"numeric",maxLength:1,value:s,onChange:a=>v(t,a.target.value),onKeyDown:a=>C(t,a),className:"h-14 w-12 rounded-lg border-2 border-gray-300 text-center text-2xl font-bold transition-all focus:border-[#23627C] focus:outline-none focus:ring-2 focus:ring-[#23627C]/20",disabled:y},t))}),e.jsx("div",{className:"text-center",children:o>0?e.jsxs("p",{className:"text-sm text-gray-600",children:["Kode akan kedaluwarsa dalam"," ",e.jsx("span",{className:"font-semibold text-[#23627C]",children:E(o)})]}):e.jsx("p",{className:"text-sm font-semibold text-red-600",children:"Kode telah kedaluwarsa"})}),e.jsx("div",{className:"space-y-3",children:e.jsxs(M,{type:"button",variant:"outline",className:"w-full",onClick:w,disabled:x.processing||o>240,children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),x.processing?"Mengirim...":"Kirim Ulang Kode"]})}),e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4 text-sm text-blue-800",children:[e.jsx("p",{className:"font-semibold",children:"ðŸ’¡ Tips:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-xs",children:[e.jsx("li",{children:"â€¢ Cek folder Spam/Junk jika tidak menerima email"}),e.jsx("li",{children:"â€¢ Kode bisa di-paste langsung dari email"}),e.jsx("li",{children:"â€¢ Maksimal 3x salah input"})]})]})]})]})]})})]})}export{Y as default};
