import{r as d,u as k,j as e,H as D,a as p}from"./app-L9aY0gQS.js";import{A as M}from"./app-logo-D-PPzr5N.js";import{B as N}from"./button-Dv55gssn.js";import{C as T,a as A,b as R,c as L,d as O}from"./card-Bc6ZZnNg.js";import{S as F}from"./shield-DtzLz01U.js";import{M as V}from"./mail-BV_hvreO.js";import{R as B}from"./refresh-cw-BSUzjwrf.js";import"./createLucideIcon-sJRutq3k.js";function Y({email:y,name:H,status:h}){const[m,l]=d.useState(["","","","","",""]),[o,g]=d.useState(300),r=d.useRef([]),{data:I,setData:$,post:z,processing:v,errors:j,reset:G}=k({code:""}),f=k({});d.useEffect(()=>{if(o<=0)return;const t=setInterval(()=>{g(s=>s-1)},1e3);return()=>clearInterval(t)},[o]),d.useEffect(()=>{var t;(t=r.current[0])==null||t.focus()},[]);const C=(t,s)=>{var u;if(s&&!/^\d$/.test(s))return;const a=[...m];if(a[t]=s,l(a),s&&t<5&&((u=r.current[t+1])==null||u.focus()),a.every(n=>n!=="")&&t===5){const n=a.join("");setTimeout(()=>{p.post(route("otp.verify"),{code:n},{onError:()=>{var i;l(["","","","","",""]),(i=r.current[0])==null||i.focus()}})},100)}},w=(t,s)=>{var a;s.key==="Backspace"&&!m[t]&&t>0&&((a=r.current[t-1])==null||a.focus()),s.key==="v"&&(s.ctrlKey||s.metaKey)&&(s.preventDefault(),navigator.clipboard.readText().then(u=>{var b;const n=u.replace(/\D/g,"").slice(0,6).split(""),i=[...m];n.forEach((x,c)=>{c<6&&(i[c]=x)}),l(i);const S=Math.min(n.length,5);if((b=r.current[S])==null||b.focus(),n.length===6){const x=i.join("");setTimeout(()=>{p.post(route("otp.verify"),{code:x},{onError:()=>{var c;l(["","","","","",""]),(c=r.current[0])==null||c.focus()}})},100)}}))},E=()=>{f.post(route("otp.resend"),{onSuccess:()=>{var t;g(300),l(["","","","","",""]),(t=r.current[0])==null||t.focus()}})},K=t=>{const s=Math.floor(t/60),a=t%60;return`${s}:${a.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"grid min-h-screen w-full lg:grid-cols-2",children:[e.jsx(D,{title:"Verifikasi Email"}),e.jsxs("div",{className:"relative hidden flex-col items-center justify-center p-10 text-white lg:flex",style:{backgroundColor:"#23627C"},children:[e.jsx("div",{className:"absolute inset-0 bg-black/40"}),e.jsxs("div",{className:"z-10 text-center",children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx(M,{})}),e.jsx(F,{className:"mx-auto mb-4 h-20 w-20"}),e.jsx("h1",{className:"text-4xl font-bold",children:"Verifikasi Email Anda"}),e.jsx("p",{className:"mt-4 max-w-md text-lg text-white/80",children:"Kami telah mengirim kode verifikasi 6 digit ke email Anda untuk memastikan keamanan akun."})]})]}),e.jsx("div",{className:"flex items-center justify-center p-6",style:{backgroundColor:"#D3EDFF"},children:e.jsxs(T,{className:"w-full max-w-md duration-700 animate-in fade-in-50 slide-in-from-bottom-8",children:[e.jsxs(A,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-blue-100",children:e.jsx(V,{className:"h-6 w-6 text-[#23627C]"})}),e.jsx(R,{className:"text-2xl font-bold tracking-tight text-[#23627C]",children:"Verifikasi Email"}),e.jsxs(L,{children:["Kami telah mengirim kode 6 digit ke ",e.jsx("br",{}),e.jsx("span",{className:"font-semibold text-[#23627C]",children:y})]})]}),e.jsxs(O,{className:"space-y-6",children:[h&&e.jsx("div",{className:"rounded-md bg-green-50 p-3 text-center text-sm text-green-800",children:h}),j.code&&e.jsx("div",{className:"rounded-md bg-red-50 p-3 text-center text-sm text-red-800",children:j.code}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center gap-2",children:m.map((t,s)=>e.jsx("input",{ref:a=>{r.current[s]=a},type:"text",inputMode:"numeric",maxLength:1,value:t,onChange:a=>C(s,a.target.value),onKeyDown:a=>w(s,a),className:"h-14 w-12 rounded-lg border-2 border-gray-300 text-center text-2xl font-bold transition-all focus:border-[#23627C] focus:outline-none focus:ring-2 focus:ring-[#23627C]/20",disabled:v},s))}),e.jsx("div",{className:"text-center",children:o>0?e.jsxs("p",{className:"text-sm text-gray-600",children:["Kode akan kedaluwarsa dalam"," ",e.jsx("span",{className:"font-semibold text-[#23627C]",children:K(o)})]}):e.jsx("p",{className:"text-sm font-semibold text-red-600",children:"Kode telah kedaluwarsa"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(N,{type:"button",variant:"outline",className:"w-full",onClick:E,disabled:f.processing||o>240,children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),f.processing?"Mengirim...":"Kirim Ulang Kode"]}),e.jsx(N,{type:"button",variant:"destructive",className:"w-full",onClick:()=>{confirm("Apakah Anda yakin ingin membatalkan registrasi dan menggunakan email lain?")&&p.post(route("otp.cancel"),{},{onSuccess:()=>{window.location.href=route("register")}})},children:"Gunakan Email Lain"})]}),e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4 text-sm text-blue-800",children:[e.jsx("p",{className:"font-semibold",children:"ðŸ’¡ Tips:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-xs",children:[e.jsx("li",{children:"â€¢ Cek folder Spam/Junk jika tidak menerima email"}),e.jsx("li",{children:"â€¢ Kode bisa di-paste langsung dari email"}),e.jsx("li",{children:"â€¢ Maksimal 3x salah input"})]})]})]})]})]})})]})}export{Y as default};
