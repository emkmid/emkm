import{u as N,j as e,H as C,L as j}from"./app-L9aY0gQS.js";import{A as k}from"./app-layout-B1Xh9hn1.js";import{B as o}from"./button-Dv55gssn.js";import{C as F,a as L,b as S,c as w,d as A}from"./card-Bc6ZZnNg.js";import{I as d}from"./input-HwfAPBcO.js";import{L as l}from"./label-Bhd4719X.js";import{T as I}from"./textarea-BRx4zyUj.js";import{S as f,a as y,b as v,c as g,d as c}from"./select-Cmpfsr34.js";import{A as T}from"./arrow-left-CHPaSCrQ.js";import{S as D}from"./save-CPiX_5Rv.js";import"./index-Cng_RkUA.js";import"./index-pYgDcjAm.js";import"./createLucideIcon-sJRutq3k.js";import"./index-BzKPpDCx.js";import"./index-CEv2-ph2.js";import"./book-open-DEw8h3GV.js";import"./chevron-down-B4fbXxRp.js";import"./check-0MzGS6mW.js";function Y({packages:u,categories:x}){const{data:t,setData:n,post:_,processing:h,errors:s}=N({feature_key:"",feature_name:"",description:"",category:x[0]||"others",limit_type:"boolean",sort_order:999,limits:u.map(a=>({package_id:a.id,is_enabled:!1,numeric_limit:null,list_values:null}))}),b=a=>{a.preventDefault(),_(route("admin.features.store"))},m=(a,p,i)=>{n("limits",t.limits.map(r=>r.package_id===a?{...r,[p]:i}:r))};return e.jsxs(k,{breadcrumbs:[{title:"Admin",href:route("admin.dashboard")},{title:"Features",href:route("admin.features.index")},{title:"Create",href:route("admin.features.create")}],children:[e.jsx(C,{title:"Create Feature"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create New Feature"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Tambahkan fitur baru ke sistem paket berlangganan"})]}),e.jsx(j,{href:route("admin.features.index"),children:e.jsxs(o,{variant:"outline",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Kembali"]})})]}),e.jsxs(F,{children:[e.jsxs(L,{children:[e.jsx(S,{children:"Create New Feature"}),e.jsx(w,{children:"Add a new feature to the package system"})]}),e.jsx(A,{children:e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"feature_key",children:"Feature Key *"}),e.jsx(d,{id:"feature_key",value:t.feature_key,onChange:a=>n("feature_key",a.target.value),placeholder:"e.g., invoices.create",required:!0}),s.feature_key&&e.jsx("p",{className:"text-sm text-red-600",children:s.feature_key})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"feature_name",children:"Feature Name *"}),e.jsx(d,{id:"feature_name",value:t.feature_name,onChange:a=>n("feature_name",a.target.value),placeholder:"e.g., Create Invoices",required:!0}),s.feature_name&&e.jsx("p",{className:"text-sm text-red-600",children:s.feature_name})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description",children:"Description"}),e.jsx(I,{id:"description",value:t.description,onChange:a=>n("description",a.target.value),placeholder:"Feature description...",rows:3}),s.description&&e.jsx("p",{className:"text-sm text-red-600",children:s.description})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"category",children:"Category *"}),e.jsxs(f,{value:t.category,onValueChange:a=>n("category",a),children:[e.jsx(y,{children:e.jsx(v,{})}),e.jsxs(g,{children:[x.map(a=>e.jsx(c,{value:a,children:a},a)),e.jsx(c,{value:"others",children:"Others"})]})]}),s.category&&e.jsx("p",{className:"text-sm text-red-600",children:s.category})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"limit_type",children:"Limit Type *"}),e.jsxs(f,{value:t.limit_type,onValueChange:a=>n("limit_type",a),children:[e.jsx(y,{children:e.jsx(v,{})}),e.jsxs(g,{children:[e.jsx(c,{value:"boolean",children:"Boolean (On/Off)"}),e.jsx(c,{value:"numeric",children:"Numeric (Count)"}),e.jsx(c,{value:"list",children:"List (Values)"})]})]}),s.limit_type&&e.jsx("p",{className:"text-sm text-red-600",children:s.limit_type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"sort_order",children:"Sort Order"}),e.jsx(d,{id:"sort_order",type:"number",value:t.sort_order,onChange:a=>n("sort_order",parseInt(a.target.value))}),s.sort_order&&e.jsx("p",{className:"text-sm text-red-600",children:s.sort_order})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Limits per Package"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Atur batasan untuk setiap paket berlangganan"}),e.jsx("div",{className:"space-y-4",children:u.map((a,p)=>{const i=t.limits.find(r=>r.package_id===a.id);return i?e.jsxs("div",{className:"border rounded-lg p-4 space-y-3 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600",children:a.price===0?"Gratis":`Rp ${a.price.toLocaleString("id-ID")}/bulan`})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_enabled,onChange:r=>m(a.id,"is_enabled",r.target.checked),className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium",children:"Aktifkan"})]})]}),i.is_enabled&&t.limit_type==="numeric"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Numeric Limit (-1 for unlimited)"}),e.jsx(d,{type:"number",value:i.numeric_limit??"",onChange:r=>m(a.id,"numeric_limit",r.target.value?parseInt(r.target.value):null),placeholder:"Enter limit or -1 for unlimited"})]}),i.is_enabled&&t.limit_type==="list"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"List Values (comma-separated)"}),e.jsx(d,{type:"text",value:i.list_values??"",onChange:r=>m(a.id,"list_values",r.target.value),placeholder:"value1,value2,value3"})]})]},a.id):null})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(j,{href:route("admin.features.index"),children:e.jsx(o,{type:"button",variant:"outline",children:"Batal"})}),e.jsxs(o,{type:"submit",disabled:h,children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),h?"Menyimpan...":"Simpan Feature"]})]})]})})]})]})]})}export{Y as default};
