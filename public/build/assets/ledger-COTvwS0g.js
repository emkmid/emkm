import{a as v,U as i,j as e,H as N,b as u}from"./app-D-1jSdSI.js";import{A as w,B as S}from"./app-layout-DxUc60V4.js";import{H as B}from"./heading-small-Dr98mXzM.js";import{T as L,a as T,b as m,e as s,d as _}from"./table-BP5egpTw.js";import"./button-BX5vcoFW.js";import"./index-CT1RrOcz.js";import"./index-BwhnYNPZ.js";import"./createLucideIcon-CXriQM3u.js";import"./index-HhnKTRnY.js";import"./index-BcvLEM1W.js";import"./calculator-BeykbKUx.js";const C=[{title:"Buku Besar",href:""}];function U(){const{accounts:g,filters:d}=v().props,[n,h]=i.useState(d.sortField||"date"),[o,p]=i.useState(d.sortOrder||"asc"),[x,b]=i.useState(d.start_date||""),[c,j]=i.useState(d.end_date||"");function y(){u.get(route("reports.ledger"),{start_date:x,end_date:c,sortField:n,sortOrder:o},{preserveState:!0})}function f(t){const a=n===t&&o==="asc"?"desc":"asc";h(t),p(a),u.get(route("reports.ledger"),{start_date:x,end_date:c,sortField:t,sortOrder:a},{preserveState:!0})}return e.jsxs(w,{children:[e.jsx(N,{title:"Buku Besar"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[e.jsx(S,{breadcrumbs:C}),e.jsxs("div",{children:[e.jsx(B,{title:"Buku Besar",description:"Laporan Buku Besar"}),e.jsx("div",{className:"mt-1 h-px bg-gray-200 dark:bg-gray-700"})]}),e.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tanggal Awal"}),e.jsx("input",{type:"date",value:x,onChange:t=>b(t.target.value),className:"rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-800 dark:text-white"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tanggal Akhir"}),e.jsx("input",{type:"date",value:c,onChange:t=>j(t.target.value),className:"rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-800 dark:text-white"})]}),e.jsx("button",{onClick:y,className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:"Terapkan"})]}),g.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-xl border border-dashed border-gray-300 bg-gray-50 py-10 text-gray-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-400",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mb-2 h-10 w-10 opacity-70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-6h13m0 0L13 4m9 7l-9 9"})}),"Tidak ada data untuk periode ini."]}),e.jsx("div",{className:"space-y-4",children:g.map(t=>e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm transition-shadow hover:shadow-md dark:border-gray-700 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.code}),e.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t.name," ",e.jsxs("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:["(",t.type,")"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:["Saldo: ",e.jsx("strong",{children:t.balance.toLocaleString()})," ",["asset","expense"].includes(t.type)?"(D)":"(K)"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["D: ",t.debit.toLocaleString()," / K: ",t.credit.toLocaleString()]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(L,{children:[e.jsx(T,{children:e.jsxs(m,{children:[e.jsxs(s,{onClick:()=>f("date"),className:"cursor-pointer",children:["Tanggal ",n==="date"?o==="asc"?"↑":"↓":""]}),e.jsx(s,{children:"Keterangan"}),e.jsx(s,{className:"text-right",children:"Debit"}),e.jsx(s,{className:"text-right",children:"Kredit"}),e.jsx(s,{className:"text-right",children:"Saldo"})]})}),e.jsx(_,{children:t.entries.reduce((a,r)=>{let l=a.running;r.type==="debit"&&(l+=r.amount),r.type==="credit"&&(l-=r.amount);const k=e.jsxs(m,{children:[e.jsx(s,{children:r.date}),e.jsx(s,{children:r.description}),e.jsx(s,{className:"text-right",children:r.type==="debit"?r.amount.toLocaleString():"—"}),e.jsx(s,{className:"text-right",children:r.type==="credit"?r.amount.toLocaleString():"—"}),e.jsxs(s,{className:"text-right font-medium",children:[l.toLocaleString()," ",["asset","expense"].includes(t.type)?"D":"K"]})]},r.id);return{running:l,rows:[...a.rows,k]}},{running:0,rows:[]}).rows})]})})]},t.id))})]})]})}export{U as default};
