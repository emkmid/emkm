import{a as h,j as e,H as g,L as u}from"./app-BNBXPyAp.js";import{B as i}from"./button-CG4I0rhr.js";import{C as f,a as b,b as y,d as v}from"./card-lfiC7PRw.js";import{T as N,a as k,b as p,c as t,d as T,e as n}from"./table-BfUlpZM2.js";import{A as _}from"./app-layout-CrXQ-9n1.js";import{P as D,S as P,T as A}from"./trash-2-BSsjL1NB.js";import"./index-CpNs-TYM.js";import"./index-BjsOvRp_.js";import"./createLucideIcon-GQdaFuD7.js";import"./index-BjWpYu-z.js";import"./index-C7Ys3ZSS.js";import"./calculator-BR8lv0Zp.js";function O({users:d}){const{flash:r}=h().props,j=h().props.packages;return e.jsxs(_,{children:[e.jsx(g,{title:"Kelola Pengguna"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Kelola Pengguna"}),e.jsx(u,{href:route("users.create"),children:e.jsxs(i,{children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Tambah Pengguna"]})})]}),(r==null?void 0:r.success)&&e.jsx("div",{className:"rounded border border-green-400 bg-green-100 px-4 py-3 text-green-700",children:r.success}),e.jsxs(f,{children:[e.jsx(b,{children:e.jsx(y,{children:"Daftar Pengguna"})}),e.jsxs(v,{children:[e.jsxs(N,{children:[e.jsx(k,{children:e.jsxs(p,{children:[e.jsx(t,{children:"Nama"}),e.jsx(t,{children:"Email"}),e.jsx(t,{children:"Role"}),e.jsx(t,{children:"Paket"}),e.jsx(t,{children:"Dibuat"}),e.jsx(t,{children:"Aksi"})]})}),e.jsx(T,{children:d.data.map(s=>{var l,c,o,m,x;return e.jsxs(p,{children:[e.jsx(n,{children:s.name}),e.jsx(n,{children:s.email}),e.jsx(n,{children:e.jsx("span",{className:`rounded px-2 py-1 text-xs font-medium ${s.role==="admin"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:s.role==="admin"?"Admin":"User"})}),e.jsxs(n,{children:[((c=(l=s.current_subscription)==null?void 0:l.package)==null?void 0:c.name)??e.jsx("span",{className:"text-xs text-muted-foreground",children:"Free"}),((o=s.current_subscription)==null?void 0:o.ends_at)&&e.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:["Sampai: ",new Date(s.current_subscription.ends_at).toLocaleDateString("id-ID")]})]}),e.jsx(n,{children:new Date(s.created_at).toLocaleDateString("id-ID")}),e.jsx(n,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{href:route("users.edit",s.id),children:e.jsx(i,{variant:"outline",size:"sm",children:e.jsx(P,{className:"h-4 w-4"})})}),e.jsxs("form",{method:"POST",action:route("admin.users.subscribe",s.id),className:"flex items-center gap-2",children:[e.jsx("input",{type:"hidden",name:"_token",value:((m=document.querySelector('meta[name="csrf-token"]'))==null?void 0:m.getAttribute("content"))??""}),e.jsx("select",{name:"package_id",className:"rounded border px-2 py-1 text-sm",children:j.map(a=>e.jsxs("option",{value:a.id,children:[a.name," - $",a.price]},a.id))}),e.jsx(i,{type:"submit",size:"sm",variant:"outline",onClick:a=>{confirm("Assign selected package to user?")||a.preventDefault()},children:"Assign"})]}),e.jsxs("form",{method:"POST",action:route("users.destroy",s.id),onSubmit:a=>{confirm("Apakah Anda yakin ingin menghapus pengguna ini?")||a.preventDefault()},children:[e.jsx("input",{type:"hidden",name:"_method",value:"DELETE"}),e.jsx("input",{type:"hidden",name:"_token",value:((x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.getAttribute("content"))??""}),e.jsx(i,{type:"submit",variant:"outline",size:"sm",className:"text-red-600 hover:text-red-800",children:e.jsx(A,{className:"h-4 w-4"})})]})]})})]},s.id)})})]}),d.data.length===0&&e.jsx("div",{className:"py-8 text-center text-gray-500",children:"Belum ada pengguna."})]})]})]})]})}export{O as default};
