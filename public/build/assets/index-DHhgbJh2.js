import{r as v,j as e,H as S,a as i}from"./app-CKCinfFZ.js";import{A as F,F as c}from"./app-layout-DzlcKoE3.js";import{C as h,a as u,b as p,c as f,d as j}from"./card-DS7sU3Zj.js";import{B as d}from"./button-CKcqXIK3.js";import{I as x}from"./input-Cv05gOWN.js";import{L as l}from"./label-CnvHLq8I.js";import{S as A,a as L,b as D,c as E,d as n}from"./select-XDaAjoZI.js";import{c as b}from"./createLucideIcon-zm2gQ1If.js";import{S as I}from"./search-DGLFmgk0.js";import{X as T}from"./index-BK5_uL61.js";import{U as z}from"./user-jZ-1dhdo.js";import{C as H}from"./calendar-B8pB8pve.js";import{E as P}from"./eye-BZSo1qs5.js";import"./index-B3DM7Jyq.js";import"./index-YQV78XoV.js";import"./index-SDKuaDNM.js";import"./index-Dcf7jzsj.js";import"./index-DYBwkXJz.js";import"./book-open-DJVO7zTz.js";import"./chevron-down-mLRSvhqX.js";import"./check-Dt-hsY0p.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],O=b("Filter",U);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],N=b("Shield",V),B=[{title:"Admin Dashboard",href:"/dashboard/admin"},{title:"Audit Logs",href:"/dashboard/admin/audit-logs"}];function ce({logs:t,filters:o}){const[m,y]=v.useState(!1),[a,r]=v.useState(o),w=()=>{i.get(route("admin.audit-logs.index"),a,{preserveState:!0})},C=()=>{r({}),i.get(route("admin.audit-logs.index"),{},{preserveState:!0})},k=s=>new Date(s).toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),_=s=>{switch(s){case"created":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"updated":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"deleted":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"restored":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},g=Object.keys(o).some(s=>o[s]);return e.jsxs(F,{breadcrumbs:B,children:[e.jsx(S,{title:"Audit Logs"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Audit Logs"}),e.jsx("p",{className:"text-muted-foreground",children:"Track semua aktivitas dan perubahan data dalam sistem"})]}),e.jsxs(d,{variant:"outline",onClick:()=>y(!m),children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),m?"Hide Filters":"Show Filters"]})]}),m&&e.jsxs(h,{children:[e.jsxs(u,{children:[e.jsx(p,{children:"Filters"}),e.jsx(f,{children:"Filter audit logs berdasarkan kriteria tertentu"})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Search"}),e.jsx(x,{placeholder:"Search logs...",value:a.search||"",onChange:s=>r({...a,search:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Event Type"}),e.jsxs(A,{value:a.event||"",onValueChange:s=>r({...a,event:s}),children:[e.jsx(L,{children:e.jsx(D,{placeholder:"All Events"})}),e.jsxs(E,{children:[e.jsx(n,{value:"",children:"All Events"}),e.jsx(n,{value:"created",children:"Created"}),e.jsx(n,{value:"updated",children:"Updated"}),e.jsx(n,{value:"deleted",children:"Deleted"}),e.jsx(n,{value:"restored",children:"Restored"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Model"}),e.jsx(x,{placeholder:"e.g., User, Product",value:a.model||"",onChange:s=>r({...a,model:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Date From"}),e.jsx(x,{type:"date",value:a.date_from||"",onChange:s=>r({...a,date_from:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Date To"}),e.jsx(x,{type:"date",value:a.date_to||"",onChange:s=>r({...a,date_to:s.target.value})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsxs(d,{onClick:w,children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Apply Filters"]}),g&&e.jsxs(d,{variant:"outline",onClick:C,children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Clear Filters"]})]})]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:e.jsxs(h,{children:[e.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Total Logs"}),e.jsx(N,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All recorded activities"})]})]})}),e.jsxs(h,{children:[e.jsxs(u,{children:[e.jsx(p,{children:"Activity Log"}),e.jsxs(f,{children:["Showing ",t.data.length," of ",t.total," logs"]})]}),e.jsxs(j,{children:[t.data.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No audit logs found"}),e.jsx("p",{className:"text-muted-foreground",children:g?"Try adjusting your filters":"Activity logs will appear here"})]}):e.jsx("div",{className:"space-y-3",children:t.data.map(s=>e.jsxs("div",{className:"flex items-start justify-between rounded-lg border p-4 hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsxs("div",{className:"mt-1",children:[s.event==="created"&&e.jsx(c,{className:"h-5 w-5 text-green-600"}),s.event==="updated"&&e.jsx(c,{className:"h-5 w-5 text-blue-600"}),s.event==="deleted"&&e.jsx(c,{className:"h-5 w-5 text-red-600"}),s.event==="restored"&&e.jsx(c,{className:"h-5 w-5 text-purple-600"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${_(s.event)}`,children:s.event_name}),e.jsx("span",{className:"text-sm font-medium",children:s.model_name}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["ID: ",s.auditable_id]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"h-3 w-3"}),s.user?s.user.name:"System"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-3 w-3"}),k(s.created_at)]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["IP: ",s.ip_address]})]}),s.event==="updated"&&s.new_values&&e.jsx("div",{className:"mt-2 text-xs",children:e.jsxs("span",{className:"text-muted-foreground",children:["Changed: ",Object.keys(s.new_values).slice(0,3).join(", "),Object.keys(s.new_values).length>3&&"..."]})})]})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>i.visit(route("admin.audit-logs.show",s.id)),children:e.jsx(P,{className:"h-4 w-4"})})]},s.id))}),t.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Page ",t.current_page," of ",t.last_page]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:"outline",size:"sm",disabled:t.current_page===1,onClick:()=>i.get(route("admin.audit-logs.index"),{...a,page:t.current_page-1}),children:"Previous"}),e.jsx(d,{variant:"outline",size:"sm",disabled:t.current_page===t.last_page,onClick:()=>i.get(route("admin.audit-logs.index"),{...a,page:t.current_page+1}),children:"Next"})]})]})]})]})]})]})}export{ce as default};
