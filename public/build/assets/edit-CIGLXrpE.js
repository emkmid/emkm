import{u as v,j as e,H as _,L as N}from"./app-L9aY0gQS.js";import{A as b,a as y}from"./app-layout-B1Xh9hn1.js";import{H as C}from"./heading-small-C0VyiOzd.js";import{I as o}from"./input-error-CsqkrECz.js";import{B as x}from"./button-Dv55gssn.js";import{C as S,d as F}from"./card-Bc6ZZnNg.js";import{C as h}from"./checkbox-CnUTNk-e.js";import{I as u}from"./input-HwfAPBcO.js";import{L as l}from"./label-Bhd4719X.js";import{S as P,a as E,b as I,c as T,d as n}from"./select-Cmpfsr34.js";import{T as w}from"./textarea-BRx4zyUj.js";import"./index-Cng_RkUA.js";import"./index-pYgDcjAm.js";import"./createLucideIcon-sJRutq3k.js";import"./index-BzKPpDCx.js";import"./index-CEv2-ph2.js";import"./book-open-DEw8h3GV.js";import"./check-0MzGS6mW.js";import"./chevron-down-B4fbXxRp.js";const B=[{title:"Kelola Notifikasi",href:route("notifications.index")},{title:"Edit Notifikasi",href:""}];function Z({notification:i,users:c}){const{data:a,setData:t,put:p,processing:m,errors:r}=v({title:i.title,message:i.message,type:i.type,target_users:i.target_users||[],scheduled_at:i.scheduled_at?new Date(i.scheduled_at).toISOString().slice(0,16):""}),g=s=>{s.preventDefault(),p(route("notifications.update",i.id))},f=(s,d)=>{d?t("target_users",[...a.target_users,s]):t("target_users",a.target_users.filter(k=>k!==s))},j=s=>{s?t("target_users",c.map(d=>d.id)):t("target_users",[])};return e.jsxs(b,{children:[e.jsx(_,{title:"Edit Notifikasi"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx(y,{breadcrumbs:B}),e.jsx(C,{title:"Edit Notifikasi",description:"Perbarui data notifikasi"}),e.jsx(S,{children:e.jsx(F,{children:e.jsxs("form",{onSubmit:g,className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(l,{htmlFor:"title",children:"Judul Notifikasi"}),e.jsx(u,{type:"text",id:"title",value:a.title,onChange:s=>t("title",s.target.value),placeholder:"Masukkan judul notifikasi"}),e.jsx(o,{message:r.title})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(l,{htmlFor:"message",children:"Pesan"}),e.jsx(w,{id:"message",value:a.message,onChange:s=>t("message",s.target.value),placeholder:"Masukkan pesan notifikasi",rows:4}),e.jsx(o,{message:r.message})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(l,{htmlFor:"type",children:"Tipe Notifikasi"}),e.jsxs(P,{value:a.type,onValueChange:s=>t("type",s),children:[e.jsx(E,{id:"type",children:e.jsx(I,{placeholder:"Pilih tipe notifikasi"})}),e.jsxs(T,{children:[e.jsx(n,{value:"system",children:"Sistem"}),e.jsx(n,{value:"reminder",children:"Pengingat"}),e.jsx(n,{value:"alert",children:"Alert"}),e.jsx(n,{value:"broadcast",children:"Broadcast"})]})]}),e.jsx(o,{message:r.type})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(l,{children:"Target Pengguna"}),e.jsxs("div",{className:"mb-2 flex items-center space-x-2",children:[e.jsx(h,{id:"select-all",checked:a.target_users.length===c.length,onCheckedChange:j}),e.jsx(l,{htmlFor:"select-all",children:"Pilih Semua User"})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto rounded border p-2",children:c.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{id:`user-${s.id}`,checked:a.target_users.includes(s.id),onCheckedChange:d=>f(s.id,d)}),e.jsxs(l,{htmlFor:`user-${s.id}`,children:[s.name," (",s.email,")"]})]},s.id))}),e.jsx("p",{className:"text-sm text-gray-500",children:"Jika tidak ada yang dipilih, notifikasi akan dikirim ke semua user."}),e.jsx(o,{message:r.target_users})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(l,{htmlFor:"scheduled_at",children:"Jadwal Kirim (Opsional)"}),e.jsx(u,{type:"datetime-local",id:"scheduled_at",value:a.scheduled_at,onChange:s=>t("scheduled_at",s.target.value)}),e.jsx("p",{className:"text-sm text-gray-500",children:"Jika kosong, notifikasi akan dikirim segera."}),e.jsx(o,{message:r.scheduled_at})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(N,{href:route("notifications.index"),children:e.jsx(x,{type:"button",variant:"outline",children:"Batal"})}),e.jsx(x,{type:"submit",disabled:m,children:m?"Memperbarui...":"Perbarui"})]})]})})})]})]})}export{Z as default};
